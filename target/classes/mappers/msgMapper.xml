<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="msg">

<insert id="insertSend">
		insert into sendermessages (mno,title,content,targetid,sender) 
		values (send_messages_seq.nextval,#{title},#{content},#{targetid},#{sender})
	</insert>
	<insert id="insertReceive">
		insert into receivermessages (mno,title,content,targetid,sender) 
		values (receive_messages_seq.nextval,#{title},#{content},#{targetid},#{sender})
	</insert>
	<select id="receiverSelect" resultType="addMsg"><!-- 수신 메세지함 -->
		select mno,title,sender,to_char(senddate,'yyyy-mm-dd hh24:mi:ss') senddate from receivermessages where targetid=#{id} order by senddate desc
	</select>
	<select id="senderSelect" resultType="addMsg"><!-- 발신 메세지함 -->
		select mno,title,targetid, to_char(senddate,'yyyy-mm-dd hh24:mi:ss') senddate from sendermessages where sender = #{id} order by senddate desc
	</select>
 	<select id="senderContent" resultType="addMsg"><!-- 내가쓴내용 -->
		select mno,targetid,title,content from sendermessages where mno=#{mno}
	</select> 
	<select id="receiverContent" resultType="addMsg"><!-- 받은내용 -->
		select mno,sender,title,content from receivermessages where mno=#{mno}
	</select>
	<delete id="sendDelete">
		delete from sendermessages where mno=#{mno}
	</delete>
		<delete id="receiveDelete">
		delete from receivermessages where mno=#{mno}
	</delete>
	<select id="senderCountPaging" resultType="int">
		select count(*) from sendermessages
	</select>
	<select id="receiverCountPaging" resultType="int">
		select count(*) from receivermessages
	</select>

</mapper>
